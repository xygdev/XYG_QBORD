(function(){window.txt=new(Backbone.View.extend({start:function(){}}))({el:document.body}),$(document).ready(function(){return txt.start(),txt.trigger("page:update"),txt.trigger("page:change")}),$(document).ajaxSend(function(t,i,e){return txt.trigger("ajax:send",t,i,e)}),$(document).ajaxComplete(function(t,i,e){return txt.trigger("ajax:complete",t,i,e),txt.trigger("page:update")})}).call(this),function(){for(var t=0,i=["webkit","moz"],e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i){var e=(new Date).getTime(),n=Math.max(0,16-(e-t)),o=window.setTimeout(function(){i(e+n)},n);return t=e+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){jQuery.fn.extend({install:function(t,i){return this.each(function(){var e;return e=jQuery(this).data("installed_behaviors"),null==e&&(e={}),null==e[t]?(i.call(this,this),e[t]=!0,jQuery(this).data("installed_behaviors",e)):void 0})}})}.call(this),function(){var t;t=function(){var t,i;return i=$(window).width(),t=768,i>t?txt.starfieldView.enable():txt.starfieldView.disable()},$(window).on("resize",_.debounce(t,200)),jQuery(function(){return t(),$("section.services, .project-body").waypoint(function(t){return"down"===t&&txt.starfieldView.hide(),"up"===t?txt.starfieldView.show():void 0}),$("section.contact-cta").waypoint(function(t){return"down"===t&&txt.starfieldView.show(),"up"===t?txt.starfieldView.hide():void 0},{offset:"100%"})})}.call(this),function(){var t={}.hasOwnProperty,i=function(i,e){function n(){this.constructor=i}for(var o in e)t.call(e,o)&&(i[o]=e[o]);return n.prototype=e.prototype,i.prototype=new n,i.__super__=e.prototype,i};txt.ContactView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.apiUrl="http://txt-webservices.herokuapp.com",e.prototype.initialize=function(){return this.$form=this.$("form"),this.$thankYou=this.$(".thank-you")},e.prototype.events={"click .close":function(t){return t.preventDefault(),this.dismiss()},"submit form":function(t){return t.preventDefault(),this.submit()}},e.prototype.present=function(){return this.$el.addClass("is-presented"),$("body").addClass("has-overlay"),this.wakeUpHeroku(),this.trigger("presented")},e.prototype.wakeUpHeroku=function(){return $.get(""+this.apiUrl)},e.prototype.dismiss=function(){return this.$el.removeClass("is-presented"),$("body").removeClass("has-overlay"),this.reset(),this.trigger("dismissed")},e.prototype.reset=function(){return this.$form.find(".btn-submit").attr("disabled",!1).val("Send"),this.$form.trigger("reset"),this.$form.show(),this.$thankYou.hide()},e.prototype.submit=function(){return this.validate()?this.send():void 0},e.prototype.validate=function(){return!0},e.prototype.send=function(){return this.displaySending(),$.ajax({type:"POST",url:""+this.apiUrl+"/contacts",data:this.$form.serialize(),success:function(t){return function(){return t.displayThankYou()}}(this),error:function(t){return function(){return t.$form.find(".btn-submit").attr("disabled",!1).val("Send")}}(this)})},e.prototype.displaySending=function(){return this.$form.find(".btn-submit").attr("disabled",!0).val("Sending...")},e.prototype.displayThankYou=function(){return this.$form.hide(),this.$thankYou.show()},e}(Backbone.View)}.call(this),function(){var t={}.hasOwnProperty,i=function(i,e){function n(){this.constructor=i}for(var o in e)t.call(e,o)&&(i[o]=e[o]);return n.prototype=e.prototype,i.prototype=new n,i.__super__=e.prototype,i};txt.ProjectWrapView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.apiUrl="http://txt-webservices.herokuapp.com",e.prototype.initialize=function(){return this.$form=this.$("form"),this.$thankYou=this.$(".thank-you"),this.wakeUpHeroku()},e.prototype.events={"submit form":function(t){return t.preventDefault(),this.submit()}},e.prototype.wakeUpHeroku=function(){return $.get(""+this.apiUrl)},e.prototype.reset=function(){return this.$form.find(".btn-submit").attr("disabled",!1).val("Send"),this.$form.trigger("reset"),this.$form.show(),this.$thankYou.hide()},e.prototype.submit=function(){return this.validate()?this.send():void 0},e.prototype.validate=function(){return!0},e.prototype.send=function(){return this.displaySending(),$.ajax({type:"POST",url:""+this.apiUrl+"/project-wraps",data:this.$form.serialize(),success:function(t){return function(){return t.displayThankYou()}}(this),error:function(t){return function(){return t.$form.find(".btn-submit").attr("disabled",!1).val("Send")}}(this)})},e.prototype.displaySending=function(){return this.$form.find(".btn-submit").attr("disabled",!0).val("Sending...")},e.prototype.displayThankYou=function(){return this.$form.hide(),this.$thankYou.show()},e}(Backbone.View)}.call(this),function(){var t=function(t,i){return function(){return t.apply(i,arguments)}},i={}.hasOwnProperty,e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};txt.StarfieldView=function(i){function n(){return this.animate=t(this.animate,this),this.updateMousePosition=t(this.updateMousePosition,this),this.onMouseMove=t(this.onMouseMove,this),this.onWindowResize=t(this.onWindowResize,this),this.onWindowScroll=t(this.onWindowScroll,this),n.__super__.constructor.apply(this,arguments)}return e(n,i),n.prototype.initialize=function(){return this.grp=[],this.cxt=this.el.getContext("2d"),this.atomNum=1e3,this.param0=1e7,this.param1=3,this.param2=.05,this.param3=.05,this.param4=30,this.mx=0,this.my=0,this.disable(),this.debouncedStart=_.debounce(function(t){return function(){return t.start()}}(this),200),this.debouncedReset=_.debounce(function(t){return function(){return t.reset()}}(this),200),this.debouncedStopAnimation=_.debounce(function(t){return function(){return t.stopAnimation()}}(this),8e3),$("body").on("mousemove",this.onMouseMove),$(window).on("scroll",this.onWindowScroll),$(window).on("resize",this.onWindowResize)},n.prototype.enable=function(){return this.isDisabled?(this.isDisabled=!1,this.reset(),this.show()):void 0},n.prototype.disable=function(){return this.isDisabled?void 0:(this.hide(),this.isDisabled=!0)},n.prototype.reset=function(){return this.isDisabled?void 0:(this.stop(),this.resize(),this.generateStars(),this.start())},n.prototype.resize=function(){return this.width=$(window).width(),this.height=$(window).height(),this.$el.prop("width",this.width),this.$el.prop("height",this.height)},n.prototype.generateStars=function(){var t,i,e,n,o,r,s,a,u,h,d,c,p;for(i=0,n=[],e=u=1;20>=u;e=++u)n.push([.1,"#333"]);for(e=h=1;20>=h;e=++h)n.push([.1,"#444"]);for(e=d=1;20>=d;e=++d)n.push([.1,"#666"]);for(e=c=1;3>=c;e=++c)n.push([.2,"#888"]);for(n.push([.2,"#999"]),p=[];i<this.atomNum;)o=n[Math.floor(Math.random()*n.length)],r=o[0],t=o[1],s=this.width*Math.random(),a=this.height*Math.random(),this.grp[i]=[],this.grp[i].ox=s,this.grp[i].oy=a,this.grp[i].colr=t,this.grp[i].weight=r,p.push(i++);return p},n.prototype.onWindowScroll=function(){return this.isDisabled?void 0:(this.stop(),this.debouncedStart())},n.prototype.onWindowResize=function(){return this.isDisabled?void 0:this.debouncedReset()},n.prototype.onMouseMove=function(t){return this.updateMousePosition(t),this.isDisabled||this.isStopped?void 0:this.startAnimation()},n.prototype.updateMousePosition=function(t){return this.mx=t.pageX-$(window).scrollLeft(),this.my=t.pageY-$(window).scrollTop()},n.prototype.animate=function(){return this.isAnimating=!0,this.animation=requestAnimationFrame(this.animate),this.draw()},n.prototype.startAnimation=function(){return this.animation||this.animate(),this.debouncedStopAnimation()},n.prototype.stopAnimation=function(){return cancelAnimationFrame(this.animation),this.animation=null,this.isAnimating=!1},n.prototype.show=function(){return this.isDisabled?void 0:(this.isHidden=!1,this.$el.removeClass("is-hidden"),this.start())},n.prototype.hide=function(){return this.isDisabled?void 0:(this.isHidden=!0,this.$el.addClass("is-hidden"),this.stop())},n.prototype.start=function(){return this.isDisabled||this.isHidden||!this.isStopped?void 0:(this.isStopped=!1,this.$el.removeClass("is-stopped"),this.startAnimation())},n.prototype.stop=function(){return this.isDisabled?void 0:(this.isStopped=!0,this.$el.addClass("is-stopped"),this.stopAnimation())},n.prototype.draw=function(){var t,i,e,n,o,r,s,a,u,h,d,c;for(this.cxt.clearRect(0,0,this.width,this.height),r=0;r<this.atomNum;){for(i=this.grp[r],i.x&&""!==i.x||(i.x=i.ox),i.y&&""!==i.y||(i.y=i.oy),e=i.x,n=i.y,a=i.ox,u=i.oy,o=this.getDistance(this.mx,this.my,e,n),h=this.param0,s=0;s<this.param1;)h/=o,s++;h=Math.min(this.param4,h),t=Math.atan2(n-this.my,e-this.mx),d=h*Math.cos(t)+(a-e)*this.param2,c=h*Math.sin(t)+(u-n)*this.param3,i.x=i.x+d,i.y=i.y+c,this.cxt.beginPath(),this.cxt.fillStyle=i.colr,this.cxt.arc(i.x,i.y,8*i.weight,0,2*Math.PI,!0),this.cxt.closePath(),this.cxt.fill(),r++}},n.prototype.getDistance=function(t,i,e,n){var o,r;return o=t-e,r=i-n,Math.sqrt(o*o+r*r)},n}(Backbone.View)}.call(this),function(){txt.on("page:update",function(){return $("[data-view]").install("autoview",function(){var t,i,e,n;if(n=$(this).data("view"),i=n.charAt(0).toLowerCase()+n.slice(1),e={el:this},null!=window[n])t=window[n];else{if(null==txt[n])throw"No constructor found for "+n+" autoview";t=txt[n]}return window.txt[i]=new t(e)})})}.call(this),function(){$(document).on("click","a[data-behavior~=contact]",function(){return txt.contactView.present(),!1})}.call(this),function(){txt.on("page:update",function(){return $('[data-behavior~="animated-panel"]').install("animated-panel",function(){var t,i;return i=$(this),t=i.data("has-been-seen"),i.waypoint(function(e){return"down"!==e?(i.removeClass("on-screen"),i.removeClass("first-time-on-screen"),i.addClass("has-been-on-screen")):(i.addClass("on-screen"),t?void 0:(i.addClass("first-time-on-screen"),t=!0))},{offset:"90%"}),i.waypoint(function(e){return"down"===e?(i.removeClass("on-screen"),i.removeClass("first-time-on-screen"),i.addClass("has-been-on-screen")):(i.addClass("on-screen"),t?void 0:(i.addClass("first-time-on-screen"),t=!0))},{offset:function(){return-i.outerHeight()}})})})}.call(this),function(){txt.on("page:update",function(){return $('[data-behavior~="detect-initial-scroll"]').install("detect-initial-scroll",function(){var t;return t=$(this),$(window).scrollTop()>0&&t.addClass("has-been-scrolled"),$(window).on("scroll",function(){var i;return i=$(window).scrollTop(),0===i?t.removeClass("has-been-scrolled"):$(window).scrollTop()>0&&!t.hasClass("has-been-scrolled")?t.addClass("has-been-scrolled"):void 0})})})}.call(this),function(){$(document).on("click","body.index #header nav a:not([data-behavior])",function(t){var i,e,n;return i=$(this),"#"===i.attr("href").substr(1)?(t.preventDefault(),n=i.attr("href").substr(2),e=$('[name="'+n+'"]').offset().top,$("html, body").animate({scrollTop:e},700,"easeOutQuart")):void 0})}.call(this),function(){txt.on("page:update",function(){return $('[data-behavior~="has-placeholder"]').install("has-placeholder",function(){return $(this).placeholder()})})}.call(this),function(){$("a[href^=http]").click(function(){var t;return t=new RegExp("/"+window.location.host+"/"),t.test(this.href)?void 0:(window.open(this.href),!1)})}.call(this);